<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Entity (wikidata.Wikidata.Entity)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">wikidata</a> &#x00BB; <a href="../index.html">Wikidata</a> &#x00BB; Entity</nav><h1>Module <code>Wikidata.Entity</code></h1><p>Represents <a href="https://www.wikidata.org/wiki/Wikidata:Glossary#Entity">Wikidata Entities</a>.</p><nav class="toc"><ul><li><a href="#rationale">Rationale</a><ul><li><a href="#virtual-classes">Virtual Classes</a></li><li><a href="#items">Items</a></li><li><a href="#properties">Properties</a></li></ul></li><li><a href="#entities">Entities</a><ul><li><a href="#conversions">Conversions</a></li></ul></li></ul></nav></header><aside><p><i>Please note that currently only Items and Properties are supported.</i></p></aside><section><header><h2 id="rationale"><a href="#rationale" class="anchor"></a>Rationale</h2><p>Unlike most other Wikidata things in this library, Entities are represented by <em>objects</em> rather than records. This is because many Entities share fields, like how Items (<span class="xref-unresolved" title="unresolved reference to &quot;Item.t&quot;"><a href="index.html#module-Item"><code>Item</code></a>.t</span>) and Properties (<span class="xref-unresolved" title="unresolved reference to &quot;Property.t&quot;"><a href="index.html#module-Property"><code>Property</code></a>.t</span>) both have <code>id</code>s, <code>label</code>s, <code>entity_type</code>s, <code>descriptions</code>, <code>aliases</code>, and <code>claims</code>.</p><p>Records are not polymorphic, and so were this library to use record types, code that uses only these shared fields would have to be duplicated to work on both Items and Properties.</p><p>By using objects, through the magic of <a href="https://dev.realworldocaml.org/objects.html#elisions-are-polymorphic">row polymorphism</a>, we can write code that operates on any object with compatible methods. For example, the following function can be run on both <span class="xref-unresolved" title="unresolved reference to &quot;Item.t&quot;"><a href="index.html#module-Item"><code>Item</code></a>.t</span>s and <span class="xref-unresolved" title="unresolved reference to &quot;Property.t&quot;"><a href="index.html#module-Property"><code>Property</code></a>.t</span>s:</p><pre><code class="ml">let label_and_description lang entity : string * string =
  (
    entity#label lang,
    entity#description lang
  )</code></pre><p>Were we to use record types for Items and Properties, this function would require pattern matching and then duplicating the code to work on both Items and Properties.</p></header><section><header><h3 id="virtual-classes"><a href="#virtual-classes" class="anchor"></a>Virtual Classes</h3><p>These classes are not meant to be instantiated, but represent features that are implemented in the non-virtual classes <a href="Item/class-t/index.html"><code>Item.t</code></a> and <a href="Property/class-t/index.html"><code>Property.t</code></a>.</p></header><dl><dt class="spec class" id="class-basic_entity"><a href="#class-basic_entity" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">virtual</span>  <a href="class-basic_entity/index.html">basic_entity</a> : id:string <span>&#45;&gt;</span> entity_type:string <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></dt><dd><p>Implements basic Entity functionality.</p></dd></dl><dl><dt class="spec class" id="class-label_description_aliases_mixin"><a href="#class-label_description_aliases_mixin" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">virtual</span>  <a href="class-label_description_aliases_mixin/index.html">label_description_aliases_mixin</a> : labels:<span><span>(<a href="../index.html#type-lang">lang</a> * string)</span> list</span> <span>&#45;&gt;</span> descriptions:<span><span>(<a href="../index.html#type-lang">lang</a> * string)</span> list</span> <span>&#45;&gt;</span> aliases:<span><span>(<a href="../index.html#type-lang">lang</a> * <span>string list</span>)</span> list</span> <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></dt><dd><p>Mixin for labels, descriptions, and aliases</p></dd></dl><dl><dt class="spec class" id="class-statements_mixin"><a href="#class-statements_mixin" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">virtual</span>  <a href="class-statements_mixin/index.html">statements_mixin</a> : statements:<span><span>(<a href="../index.html#type-lang">lang</a> * <span><a href="../Statement/index.html#type-t">Statement.t</a> list</span>)</span> list</span> <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></dt><dd><p>Mixin for Statements.</p></dd></dl></section><section><header><h3 id="items"><a href="#items" class="anchor"></a>Items</h3></header><dl><dt class="spec module" id="module-Item"><a href="#module-Item" class="anchor"></a><code><span class="keyword">module</span> <a href="Item/index.html">Item</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Represents <a href="https://www.wikidata.org/wiki/Wikidata:Glossary#Item">Wikidata Items</a>.</p></dd></dl></section><section><header><h3 id="properties"><a href="#properties" class="anchor"></a>Properties</h3></header><dl><dt class="spec module" id="module-Property"><a href="#module-Property" class="anchor"></a><code><span class="keyword">module</span> <a href="Property/index.html">Property</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Represents <a href="https://www.wikidata.org/wiki/Wikidata:Glossary#Property">Wikidata Properties</a>.</p></dd></dl></section></section><section><header><h2 id="entities"><a href="#entities" class="anchor"></a>Entities</h2><p>In this section, entities are represented as a variant type between different types of entities (like <span class="xref-unresolved" title="unresolved reference to &quot;Item.t&quot;"><a href="index.html#module-Item"><code>Item</code></a>.t</span>s and <span class="xref-unresolved" title="unresolved reference to &quot;Property.t&quot;"><a href="index.html#module-Property"><code>Property</code></a>.t</span>s) rather than as an object that is a subtype of both. The reason is that OCaml's object system lacks <a href="https://dev.realworldocaml.org/objects.html#narrowing">narrowing</a>. As such, were we to return a mutual subtype of all entity types, methods that are not shared between those entity types would become inaccessible.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = </code><table class="variant"><tr id="type-t.Item" class="anchored"><td class="def constructor"><a href="#type-t.Item" class="anchor"></a><code>| </code><code><span class="constructor">Item</span> <span class="keyword">of</span> <a href="Item/class-t/index.html">Item.t</a></code></td><td class="doc"><p>Represents a Wikidata Item.</p></td></tr><tr id="type-t.Property" class="anchored"><td class="def constructor"><a href="#type-t.Property" class="anchor"></a><code>| </code><code><span class="constructor">Property</span> <span class="keyword">of</span> <a href="Property/class-t/index.html">Property.t</a></code></td><td class="doc"><p>Represents a Wikidata Property.</p></td></tr></table></dt><dd><p>A variant type of all supported Entity types.</p></dd></dl><section><header><h3 id="conversions"><a href="#conversions" class="anchor"></a>Conversions</h3></header><dl><dt class="spec value" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span class="keyword">val</span> of_string : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Turns a json string representing some Entity (as described in the <a href="https://doc.wikimedia.org/Wikibase/master/php/md_docs_topics_json.html#json_structure">Wikibase JSON specification</a>) into a <a href="index.html#type-t"><code>t</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-of_entities_string"><a href="#val-of_entities_string" class="anchor"></a><code><span class="keyword">val</span> of_entities_string : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Returns the first entity in a JSON string representing a group of entities as a <a href="index.html#type-t"><code>t</code></a>. This is provided as a convenience function, as this is the format that requests to <code>https://wikidata.org/wiki/Special:EntityData/{ID}.json</code> (where <code>ID</code> is a Wikidata Entity ID) are returned in.</p></dd></dl></section></section></div></body></html>